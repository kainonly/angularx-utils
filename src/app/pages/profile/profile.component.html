<nz-page-header [nzTitle]="bit.title|Locale:bit.locale"></nz-page-header>

<nz-card [nzBordered]="false">
  <form nz-form [formGroup]="form" (bitFormSubmit)="submit($event)">
    <nz-form-item>
      <nz-form-label bitFormLabelCol>
        {{bit.l['call']}}
      </nz-form-label>
      <nz-form-control bitFormControlCol nzHasFeedback>
        <input nz-input formControlName="call" [placeholder]="bit.l['callPlaceholder']"/>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label bitFormLabelCol>
        {{bit.l['email']}}
      </nz-form-label>
      <nz-form-control bitFormControlCol
                       nzHasFeedback
                       [nzErrorTip]="email.ref">
        <input nz-input formControlName="email" [placeholder]="bit.l['emailPlaceholder']"/>
        <bit-error-tip #email [hasError]="{
          email:bit.l['emailCorrectly']
        }"></bit-error-tip>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label bitFormLabelCol>
        {{bit.l['phone']}}
      </nz-form-label>
      <nz-form-control bitFormControlCol nzHasFeedback>
        <input nz-input formControlName="phone" [placeholder]="bit.l['phonePlaceholder']"/>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label bitFormLabelCol>
        {{bit.l['avatar']}}
      </nz-form-label>
      <nz-form-control bitFormControlCol>
        <p>{{bit.l['avatarTips']}}</p>
        <nz-upload nzName="image"
                   bitUpload
                   nzListType="picture-card"
                   (nzChange)="upload($event)">
          <ng-container *ngIf="!avatar">
            <i nz-icon nzType="plus"></i>
            <div class="ant-upload-text">{{bit.l['upload']}}</div>
          </ng-container>
          <img width="120" *ngIf="avatar" [src]="bit.static+avatar" class="avatar">
        </nz-upload>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label bitFormLabelCol>
        {{bit.l['editPassword']}}
      </nz-form-label>
      <nz-form-control bitFormControlCol>
        <nz-switch [(ngModel)]="editPassword"
                   (ngModelChange)="editPasswordChange($event)"
                   [ngModelOptions]="{standalone: true}"></nz-switch>
      </nz-form-control>
    </nz-form-item>

    <ng-template [ngIf]="editPassword">
      <nz-form-item>
        <nz-form-label bitFormLabelCol>
          {{bit.l['oldPassword']}}
        </nz-form-label>
        <nz-form-control bitFormControlCol
                         nzHasFeedback
                         [nzErrorTip]="old_password.ref">
          <input nz-input formControlName="old_password" type="password"
                 [placeholder]="bit.l['passwordPlaceholder']"/>
          <bit-error-tip #old_password [hasError]="{
            minlength:bit.l['passwordCorrectly'],
            maxlength:bit.l['passwordCorrectly']
          }"></bit-error-tip>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label bitFormLabelCol>
          {{bit.l['newPassword']}}
        </nz-form-label>
        <nz-form-control bitFormControlCol
                         nzHasFeedback
                         [nzErrorTip]="new_password.ref">
          <input nz-input formControlName="new_password" type="password"
                 [placeholder]="bit.l['passwordPlaceholder']"/>
          <bit-error-tip #new_password [hasError]="{
            minlength:bit.l['passwordCorrectly'],
            maxlength:bit.l['passwordCorrectly']
          }"></bit-error-tip>
        </nz-form-control>
      </nz-form-item>
    </ng-template>

    <nz-divider></nz-divider>

    <nz-form-item>
      <nz-form-control bitFormControlCol="submit">
        <button nz-button nzType="primary" [disabled]="!form.valid">
          {{bit.l['submit']}}
        </button>
      </nz-form-control>
    </nz-form-item>
  </form>
</nz-card>

